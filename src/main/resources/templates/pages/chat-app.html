<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
    th:replace="base::layout(~{::.row},~{::title},~{::script},~{::link})">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/chat-app/css/chat-app.css}">
    <title>chat app</title>

</head>

<body>
    <div class="row profile-change-div bg-warning" style="position: relative;">
        <div class="col-4 shadow profile-change-model m-auto border border-1 border-dark py-2"
            style="transform: scale(0,0);" id="profile-pop-up">
            <div class="profile-model-header" id="close-profile-div" style="text-align: right;">
                <i class="fa-solid fa-x" id="close-profile-model" style="cursor: pointer;"></i>
            </div>
            <div class="mb-3">
                <label for="formFile" class="form-label text-light">select image</label>
                <input class="form-control" type="file" id="form-file" th:attr="data-user_id=${session.user.user_id}">
            </div>
            <img src="" alt="demo" width="150px" height="150px" class="mb-2" id="profile-demo" style="display: none;">
            <button class="btn btn-primary">Save</button>
        </div>
    </div>
    <div class="row chat-section">
        <div class="col-12 chat-header mb-3 text-light d-flex" style="background-color: #f76b2a;">
            <h6 class="mb-0 me-2" th:text="${session.user.user_id}" id="unique-name" style="display: none;"></h6>
            <h6 class="mb-0 me-2" th:text="${session.user.userName}" id="myame"></h6>

            <a th:href="@{/logout}" class="btn btn-danger me-2">Logout</a>
            <div class="my-profile-pic" style="width: 35px; height: 35px; cursor: pointer;">
                <img th:src="@{/assets/img_avatar.png}" alt="" th:attr="data-user=${session.user.user_id}" width="100%"
                    style="border-radius: 50%;" onclick="openEditProfileModel(event)">
            </div>
        </div>
        <div class="col-10 chat m-auto shadow">
            <div class="row">
                <div class="col-3 p-0 border border-1 d-flex flex-column justify-content-between" style="height:550px">
                    <div class="friends-selection-section" style="height: 510px;overflow:auto">
                        <div class="rfs-btn d-flex justify-content-between align-items-center mb-2 px-2"
                            style="background-color: #f76b2a;">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="online"
                                    autocomplete="off">

                            </div>
                            <i class="fa-solid fa-arrows-rotate shadow" id="refresh"
                                style="color: white;font-size:20px;"></i>
                        </div>
                        <ul class="mb-2" id="friend-list" style="list-style: none;padding-left:0;margin-bottom:0;">


                        </ul>
                        <ul class="mb-2" id="not-friend-list" style="list-style: none;padding-left:0;margin-bottom:0;">


                        </ul>
                    </div>
                    <div class="change-users-view">
                        <div class="row m-0">
                            <div class="col-6 border border-1" id="not-my-friends" style="cursor: pointer;">
                                <h5>Not friend</h5>
                            </div>
                            <div class="col-6 border border-1" id="my-friends" style="cursor: pointer;">
                                <h6>Friends</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-9 border border-1 p-0" id="chat-main">
                    <div class="message-section-header bg-primary d-flex align-items-center justify-content-between px-3"
                        style="height: 55px;position: relative;">
                        <div>
                            <img th:src="@{/assets/img_avatar.png}" alt="" width="45px" height="45px"
                                style="border-radius: 50%;">
                            <small id="message-header-label">

                            </small>
                        </div>
                        <label for="" style="cursor: pointer;" id="profile-more-options"></label>
                        <ul id="more-option" class="shadow rounded m-0" style="background-color: rgb(241, 233, 233);position:absolute;top: 40px;right: 20px;
                        list-style: none;padding: 0;width: 70px;padding: 2px 4px;cursor: pointer;transform: scale(0,0);
                        transition: transform ease-in-out .5s;transform-origin: top;">
                            <li style="border-bottom: 1px solid white;" onMouseOut="this.style.color='black'" onMouseOver="this.style.color='red'"
                            >Unfriend</li>
                            <li onMouseOut="this.style.color='black'" onMouseOver="this.style.color='red'">More</li>
                            
                        </ul>

                    </div>
                    <div class="message-section" id="section-of-message">
                        <!-- <div class="left-div">
                            <label class="left-time">3:25</label>
                            <div class="left-msg">
                                <small>Hello</small>
                            </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-center" id="date-time-stamp">
                            <h6 style="background-color: red;color:white">29/10/2022</h6>
                        </div>
                        <div class="right-div">
                            <label class="right-time">3:25</label>
                            <div class="right-msg">
                                <small>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consectetur quia
                                    repellendus omnis aspernatur earum quae, aliquam quidem modi aperiam expedita
                                    doloremque illo nemo. Sint aliquam laboriosam eveniet incidunt dolorum sunt officiis
                                    voluptatibus asperiores, possimus, rem maxime eos fuga tempora quasi blanditiis
                                    beatae nemo temporibus fugit illo itaque. Ducimus, eos error.</small>
                            </div>
                        </div> -->

                    </div>
                    <div class="message-input-section bg-warning">
                        <form action="" class="d-flex align-items-center" id="submit-message">
                            <input type="text" class="form-control w-50 me-2 my-1" name="message" id="message-area"
                                required>
                            <button type="submit" class="btn btn-primary">send</button>
                            <!-- <input type="file" class="form-control"> -->
                        </form>
                    </div>
                    <!-- <h1>Hello</h1>
                    <button class="btn btn-warning" id="send-message" th:value="${session.user.user_id}" onclick="sendMessage(event)">Send</button> -->
                </div>
            </div>



        </div>

    </div>
    <script th:inline="javascript" th:src="@{/chat-app/js/chat-app.js}"></script>
</body>

</html>